<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>×ª××•×¨×” ×¡×•×›× ×•×ª ×œ×‘×™×˜×•×— | Executive Intelligence Dashboard</title>
<script src="https://d3js.org/d3.v7.min.js"></script>
<style>
@import url('https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;600;700;800;900&display=swap');

:root {
  --bg-primary: #0a0e1a;
  --bg-secondary: #111827;
  --bg-card: rgba(17, 24, 39, 0.7);
  --bg-glass: rgba(255, 255, 255, 0.03);
  --gold: #D4A843;
  --gold-light: #f0d78c;
  --gold-dark: #a07d2e;
  --text-primary: #e8e8e8;
  --text-secondary: #9ca3af;
  --text-muted: #6b7280;
  --border: rgba(212, 168, 67, 0.15);
  --border-hover: rgba(212, 168, 67, 0.4);
  --glass-bg: rgba(255, 255, 255, 0.04);
  --glass-border: rgba(255, 255, 255, 0.08);
  --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
  --shadow-gold: 0 0 30px rgba(212, 168, 67, 0.1);
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  font-family: 'Heebo', sans-serif;
  background: var(--bg-primary);
  color: var(--text-primary);
  min-height: 100vh;
  overflow-x: hidden;
}

body::before {
  content: '';
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background: 
    radial-gradient(ellipse at 20% 0%, rgba(212, 168, 67, 0.06) 0%, transparent 50%),
    radial-gradient(ellipse at 80% 100%, rgba(212, 168, 67, 0.04) 0%, transparent 50%),
    radial-gradient(ellipse at 50% 50%, rgba(10, 14, 26, 1) 0%, transparent 100%);
  pointer-events: none;
  z-index: 0;
}

.container {
  max-width: 1600px;
  margin: 0 auto;
  padding: 0 24px;
  position: relative;
  z-index: 1;
}

/* Header */
.header {
  padding: 24px 0;
  border-bottom: 1px solid var(--border);
  margin-bottom: 32px;
}

.header-content {
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-wrap: wrap;
  gap: 20px;
}

.brand {
  display: flex;
  align-items: center;
  gap: 20px;
}

.logo {
  width: 64px;
  height: 64px;
  border-radius: 16px;
  background: linear-gradient(135deg, var(--gold), var(--gold-dark));
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 28px;
  font-weight: 900;
  color: var(--bg-primary);
  box-shadow: var(--shadow-gold);
}

.brand-text h1 {
  font-size: 28px;
  font-weight: 800;
  background: linear-gradient(135deg, var(--gold-light), var(--gold));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.brand-text .subtitle {
  font-size: 13px;
  color: var(--text-secondary);
  margin-top: 2px;
  letter-spacing: 2px;
  text-transform: uppercase;
}

.header-stats {
  display: flex;
  gap: 32px;
}

.stat-item {
  text-align: center;
}

.stat-value {
  font-size: 24px;
  font-weight: 700;
  color: var(--gold);
}

.stat-label {
  font-size: 11px;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 1px;
}

/* Navigation Tabs */
.nav-tabs {
  display: flex;
  gap: 4px;
  margin-bottom: 28px;
  background: var(--glass-bg);
  border: 1px solid var(--glass-border);
  border-radius: 12px;
  padding: 4px;
  width: fit-content;
}

.nav-tab {
  padding: 10px 24px;
  border-radius: 8px;
  cursor: pointer;
  font-size: 14px;
  font-weight: 500;
  color: var(--text-secondary);
  transition: all 0.3s;
  border: none;
  background: none;
  font-family: inherit;
}

.nav-tab:hover {
  color: var(--text-primary);
  background: rgba(255,255,255,0.05);
}

.nav-tab.active {
  background: linear-gradient(135deg, var(--gold), var(--gold-dark));
  color: var(--bg-primary);
  font-weight: 600;
}

/* Search */
.search-bar {
  position: relative;
  margin-bottom: 24px;
  max-width: 400px;
}

.search-bar input {
  width: 100%;
  padding: 12px 20px;
  padding-right: 44px;
  background: var(--glass-bg);
  border: 1px solid var(--glass-border);
  border-radius: 10px;
  color: var(--text-primary);
  font-family: inherit;
  font-size: 14px;
  outline: none;
  transition: border-color 0.3s;
}

.search-bar input::placeholder { color: var(--text-muted); }
.search-bar input:focus { border-color: var(--gold); }

.search-bar .search-icon {
  position: absolute;
  right: 14px;
  top: 50%;
  transform: translateY(-50%);
  color: var(--text-muted);
  font-size: 18px;
}

/* Sections */
.section { display: none; }
.section.active { display: block; }

/* Cards */
.glass-card {
  background: var(--bg-card);
  backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
  padding: 24px;
  transition: all 0.3s;
}

.glass-card:hover {
  border-color: var(--border-hover);
  box-shadow: var(--shadow-gold);
}

.card-title {
  font-size: 16px;
  font-weight: 600;
  color: var(--gold);
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 8px;
}

/* Org Chart */
.org-chart-container {
  overflow-x: auto;
  padding: 20px 0;
}

#org-chart {
  min-width: 1200px;
  min-height: 700px;
}

.org-node {
  cursor: pointer;
  transition: all 0.3s;
}

.org-node:hover .node-bg {
  filter: brightness(1.2);
  stroke: var(--gold);
  stroke-width: 2;
}

.org-node text {
  font-family: 'Heebo', sans-serif;
}

.org-link {
  fill: none;
  stroke: rgba(212, 168, 67, 0.25);
  stroke-width: 1.5;
}

/* Executive Detail Panel */
.exec-detail-overlay {
  display: none;
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(0,0,0,0.7);
  backdrop-filter: blur(8px);
  z-index: 1000;
  align-items: center;
  justify-content: center;
}

.exec-detail-overlay.visible {
  display: flex;
}

.exec-detail {
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: 20px;
  padding: 40px;
  max-width: 600px;
  width: 90%;
  max-height: 80vh;
  overflow-y: auto;
  position: relative;
  box-shadow: 0 24px 80px rgba(0,0,0,0.6);
}

.exec-detail .close-btn {
  position: absolute;
  top: 16px;
  left: 16px;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: var(--glass-bg);
  border: 1px solid var(--glass-border);
  color: var(--text-secondary);
  font-size: 18px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s;
}

.exec-detail .close-btn:hover {
  background: rgba(255,255,255,0.1);
  color: var(--text-primary);
}

.exec-avatar {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--gold), var(--gold-dark));
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 32px;
  font-weight: 700;
  color: var(--bg-primary);
  margin-bottom: 16px;
}

.exec-name-he {
  font-size: 26px;
  font-weight: 700;
  color: var(--text-primary);
}

.exec-name-en {
  font-size: 15px;
  color: var(--text-secondary);
  margin-bottom: 4px;
}

.exec-title {
  font-size: 14px;
  color: var(--gold);
  font-weight: 500;
  margin-bottom: 20px;
}

.exec-meta {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-top: 16px;
}

.exec-meta-item {
  display: flex;
  gap: 10px;
  font-size: 13px;
  color: var(--text-secondary);
  padding: 8px 12px;
  background: var(--glass-bg);
  border-radius: 8px;
  border: 1px solid var(--glass-border);
}

.exec-meta-item .label {
  color: var(--gold);
  font-weight: 600;
  min-width: 80px;
}

.linkedin-btn {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  margin-top: 16px;
  padding: 10px 20px;
  background: linear-gradient(135deg, #0077b5, #005885);
  color: white;
  border-radius: 8px;
  text-decoration: none;
  font-size: 13px;
  font-weight: 500;
  transition: all 0.3s;
}

.linkedin-btn:hover { filter: brightness(1.15); transform: translateY(-1px); }

/* Grid layouts */
.grid-2 {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
}

.grid-3 {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 20px;
}

.grid-4 {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 16px;
}

/* Executive cards grid */
.exec-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 16px;
}

.exec-card {
  background: var(--glass-bg);
  border: 1px solid var(--glass-border);
  border-radius: 12px;
  padding: 20px;
  cursor: pointer;
  transition: all 0.3s;
  display: flex;
  gap: 14px;
  align-items: flex-start;
}

.exec-card:hover {
  border-color: var(--border-hover);
  background: rgba(255,255,255,0.06);
  transform: translateY(-2px);
  box-shadow: var(--shadow-gold);
}

.exec-card .avatar-sm {
  width: 48px;
  height: 48px;
  min-width: 48px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--gold), var(--gold-dark));
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  font-weight: 700;
  color: var(--bg-primary);
}

.exec-card .info h3 {
  font-size: 15px;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 2px;
}

.exec-card .info .en-name {
  font-size: 12px;
  color: var(--text-muted);
  margin-bottom: 4px;
}

.exec-card .info .role {
  font-size: 12px;
  color: var(--gold);
  font-weight: 500;
}

/* Force Graph */
#force-graph {
  width: 100%;
  height: 600px;
  border-radius: 16px;
  background: var(--glass-bg);
  border: 1px solid var(--glass-border);
}

/* Analytics */
.analytics-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
  margin-top: 20px;
}

.bar-chart .bar-item {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 14px;
}

.bar-chart .bar-label {
  font-size: 13px;
  color: var(--text-secondary);
  min-width: 140px;
  text-align: left;
}

.bar-chart .bar-track {
  flex: 1;
  height: 24px;
  background: rgba(255,255,255,0.04);
  border-radius: 6px;
  overflow: hidden;
  position: relative;
}

.bar-chart .bar-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--gold-dark), var(--gold));
  border-radius: 6px;
  transition: width 1s ease;
  display: flex;
  align-items: center;
  padding: 0 8px;
  font-size: 11px;
  font-weight: 600;
  color: var(--bg-primary);
}

/* Company overview */
.overview-grid {
  display: grid;
  grid-template-columns: 2fr 1fr;
  gap: 20px;
}

.info-row {
  display: flex;
  justify-content: space-between;
  padding: 12px 0;
  border-bottom: 1px solid var(--glass-border);
  font-size: 14px;
}

.info-row .label { color: var(--text-muted); }
.info-row .value { color: var(--text-primary); font-weight: 500; }
.info-row .value a { color: var(--gold); text-decoration: none; }
.info-row .value a:hover { text-decoration: underline; }

/* Depth chart */
.depth-level {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 10px;
  padding: 10px 16px;
  background: var(--glass-bg);
  border-radius: 8px;
  border-right: 3px solid var(--gold);
}

.depth-level .level-badge {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--gold), var(--gold-dark));
  color: var(--bg-primary);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  font-weight: 700;
}

.depth-level .level-info {
  flex: 1;
}

.depth-level .level-title {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-primary);
}

.depth-level .level-count {
  font-size: 11px;
  color: var(--text-muted);
}

/* Org Chart SVG Styles */
.node-box {
  rx: 10;
  ry: 10;
}

/* Subsidiary badge */
.subsidiary-badge {
  display: inline-block;
  padding: 2px 8px;
  background: rgba(212, 168, 67, 0.15);
  border: 1px solid rgba(212, 168, 67, 0.3);
  border-radius: 4px;
  font-size: 10px;
  color: var(--gold);
  margin-top: 4px;
}

/* Responsive */
@media (max-width: 1200px) {
  .grid-4 { grid-template-columns: repeat(2, 1fr); }
  .overview-grid { grid-template-columns: 1fr; }
}

@media (max-width: 768px) {
  .header-content { flex-direction: column; align-items: flex-start; }
  .grid-2, .grid-3, .analytics-grid { grid-template-columns: 1fr; }
  .nav-tabs { flex-wrap: wrap; }
  .exec-detail { padding: 24px; }
}

/* Animations */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.section.active { animation: fadeIn 0.4s ease; }

/* Scrollbar */
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: rgba(212, 168, 67, 0.3); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: rgba(212, 168, 67, 0.5); }

/* Notable employees */
.notable-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
  gap: 12px;
  margin-top: 16px;
}

.notable-card {
  padding: 14px;
  background: var(--glass-bg);
  border: 1px solid var(--glass-border);
  border-radius: 10px;
  font-size: 13px;
}

.notable-card .name {
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 4px;
}

.notable-card .role {
  color: var(--text-muted);
  font-size: 12px;
}

.notable-card .reports {
  color: var(--gold);
  font-size: 11px;
  margin-top: 4px;
  opacity: 0.7;
}

/* Pulse animation for key nodes */
@keyframes pulse-gold {
  0%, 100% { box-shadow: 0 0 0 0 rgba(212, 168, 67, 0.4); }
  50% { box-shadow: 0 0 0 8px rgba(212, 168, 67, 0); }
}
</style>
</head>
<body>

<div class="container">
  <!-- Header -->
  <header class="header">
    <div class="header-content">
      <div class="brand">
        <div class="logo">×ª</div>
        <div class="brand-text">
          <h1>×ª××•×¨×” ×¡×•×›× ×•×ª ×œ×‘×™×˜×•×—</h1>
          <div class="subtitle">Executive Intelligence Dashboard</div>
        </div>
      </div>
      <div class="header-stats">
        <div class="stat-item">
          <div class="stat-value">1987</div>
          <div class="stat-label">× ×•×¡×“×”</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">201-500</div>
          <div class="stat-label">×¢×•×‘×“×™×</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">12</div>
          <div class="stat-label">×”× ×”×œ×” ×‘×›×™×¨×”</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">×”×•×“ ×”×©×¨×•×Ÿ</div>
          <div class="stat-label">××˜×”</div>
        </div>
      </div>
    </div>
  </header>

  <!-- Navigation -->
  <nav class="nav-tabs">
    <button class="nav-tab active" onclick="showSection('overview')">×¡×§×™×¨×” ×›×œ×œ×™×ª</button>
    <button class="nav-tab" onclick="showSection('orgchart')">××‘× ×” ××¨×’×•× ×™</button>
    <button class="nav-tab" onclick="showSection('network')">×¨×©×ª ×§×©×¨×™×</button>
    <button class="nav-tab" onclick="showSection('executives')">×”× ×”×œ×”</button>
    <button class="nav-tab" onclick="showSection('analytics')">×× ×œ×™×˜×™×§×¡</button>
  </nav>

  <!-- Search -->
  <div class="search-bar">
    <input type="text" id="searchInput" placeholder="×—×™×¤×•×© ×× ×”×œ×™×, ×ª×¤×§×™×“×™×..." oninput="handleSearch(this.value)">
    <span class="search-icon">ğŸ”</span>
  </div>

  <!-- Overview Section -->
  <section id="section-overview" class="section active">
    <div class="overview-grid">
      <div class="glass-card">
        <div class="card-title">ğŸ“‹ ×¤×¨×˜×™ ×”×—×‘×¨×”</div>
        <div class="info-row"><span class="label">×©× ×¨×©××™</span><span class="value">×ª××•×¨×” ×¡×•×›× ×•×ª ×œ×‘×™×˜×•×— (1987) ×‘×¢"×</span></div>
        <div class="info-row"><span class="label">×—.×¤</span><span class="value">511236515</span></div>
        <div class="info-row"><span class="label">×ª×¢×©×™×™×”</span><span class="value">×‘×™×˜×•×—</span></div>
        <div class="info-row"><span class="label">××˜×”</span><span class="value">×”×•×“ ×”×©×¨×•×Ÿ, ×™×©×¨××œ</span></div>
        <div class="info-row"><span class="label">×©× ×ª ×™×™×¡×•×“</span><span class="value">1987</span></div>
        <div class="info-row"><span class="label">×’×•×“×œ</span><span class="value">201-500 ×¢×•×‘×“×™×</span></div>
        <div class="info-row"><span class="label">×—×‘×¨×ª ×‘×ª</span><span class="value">×ª××•×¨×” ××œ××” (Tmura Mlea)</span></div>
        <div class="info-row"><span class="label">××ª×¨</span><span class="value"><a href="https://www.tmu.co.il" target="_blank">tmu.co.il</a> / <a href="https://www.tmuralife.co.il" target="_blank">tmuralife.co.il</a></span></div>
        <div class="info-row"><span class="label">LinkedIn</span><span class="value"><a href="https://www.linkedin.com/company/2238426/" target="_blank">511 ×¢×•×§×‘×™× â€¢ 103 ×—×‘×¨×™×</a></span></div>
      </div>
      <div>
        <div class="glass-card" style="margin-bottom: 20px;">
          <div class="card-title">ğŸ‘¤ ×× ×›"×œ×™×ª</div>
          <div style="display:flex;gap:14px;align-items:center;margin-bottom:12px;">
            <div class="exec-avatar" style="width:56px;height:56px;font-size:22px;">×§</div>
            <div>
              <div style="font-size:18px;font-weight:700;">×§×¨×Ÿ ×©××™×¨</div>
              <div style="font-size:12px;color:var(--text-muted);">Keren Shamir</div>
              <div style="font-size:12px;color:var(--gold);">×× ×›×´×œ×™×ª ×§×‘×•×¦×ª ×ª××•×¨×”</div>
            </div>
          </div>
          <div style="font-size:12px;color:var(--text-secondary);line-height:1.8;">
            <div>ğŸ“… ×‘×ª×¤×§×™×“ ×××– ××¨×¥ 2024</div>
            <div>ğŸ“ MBA ×©×™×•×•×§, BSc ×¡×˜×˜×™×¡×˜×™×§×”</div>
            <div>ğŸ“Š 20+ ×©× ×•×ª × ×™×¡×™×•×Ÿ ×‘×‘×™×˜×•×—</div>
            <div>ğŸ¢ ×œ×©×¢×‘×¨: ×× ×›"×œ×™×ª ×§×‘×•×¦×ª ×©×§×œ (12+ ×©× ×™×)</div>
          </div>
        </div>
        <div class="glass-card">
          <div class="card-title">ğŸ“Š ××‘× ×” × ×™×”×•×œ×™</div>
          <div class="depth-level">
            <div class="level-badge">1</div>
            <div class="level-info">
              <div class="level-title">×× ×›"×œ×™×ª</div>
              <div class="level-count">1 ×× ×”×œ/×ª</div>
            </div>
          </div>
          <div class="depth-level">
            <div class="level-badge">2</div>
            <div class="level-info">
              <div class="level-title">××©× ×” ×œ×× ×›"×œ / ×¡×× ×›"×œ×™×</div>
              <div class="level-count">8 ×× ×”×œ×™×</div>
            </div>
          </div>
          <div class="depth-level">
            <div class="level-badge">3</div>
            <div class="level-info">
              <div class="level-title">×× ×”×œ×™ ×ª×—×•× / ×—×‘×¨×ª ×‘×ª</div>
              <div class="level-count">3 ×× ×”×œ×™×</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Notable Employees -->
    <div class="glass-card" style="margin-top:20px;">
      <div class="card-title">ğŸ‘¥ ×¢×•×‘×“×™× × ×•×¡×¤×™× ×©×–×•×”×•</div>
      <div class="notable-grid">
        <div class="notable-card">
          <div class="name">Emilie Cohen</div>
          <div class="role">IT & Information Security Manager</div>
          <div class="reports">×“×™×•×•×— ×œ: CIO</div>
        </div>
        <div class="notable-card">
          <div class="name">Yael Vanesa Ben Shushan</div>
          <div class="role">Customer Service Team Manager</div>
          <div class="reports">×“×™×•×•×— ×œ: VP Service Center</div>
        </div>
        <div class="notable-card">
          <div class="name">Saar Eliyahoo</div>
          <div class="role">Senior Supervisor | Account Manager</div>
          <div class="reports">××›×™×¨×•×ª</div>
        </div>
        <div class="notable-card">
          <div class="name">Maya Kolberg</div>
          <div class="role">Executive Assistant & HR Administrator</div>
          <div class="reports">×”× ×”×œ×”</div>
        </div>
        <div class="notable-card">
          <div class="name">Tanya Bondovski</div>
          <div class="role">Personal Assistant</div>
          <div class="reports">×”× ×”×œ×”</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Org Chart Section -->
  <section id="section-orgchart" class="section">
    <div class="glass-card">
      <div class="card-title">ğŸ›ï¸ ××‘× ×” ××¨×’×•× ×™ - ×¢×¥ ×”×™×¨×¨×›×™</div>
      <div class="org-chart-container">
        <svg id="org-chart"></svg>
      </div>
    </div>
  </section>

  <!-- Network Section -->
  <section id="section-network" class="section">
    <div class="glass-card">
      <div class="card-title">ğŸ•¸ï¸ ×¨×©×ª ×§×©×¨×™× - ×’×¨×£ ×›×•×—×•×ª</div>
      <div id="force-graph"></div>
    </div>
  </section>

  <!-- Executives Section -->
  <section id="section-executives" class="section">
    <div class="glass-card">
      <div class="card-title">ğŸ‘” ×¦×•×•×ª ×”×”× ×”×œ×”</div>
      <div class="exec-grid" id="execGrid"></div>
    </div>
  </section>

  <!-- Analytics Section -->
  <section id="section-analytics" class="section">
    <div class="analytics-grid">
      <div class="glass-card">
        <div class="card-title">ğŸ“Š ×—×œ×•×§×” ×œ×¤×™ ×—×˜×™×‘×•×ª</div>
        <div class="bar-chart">
          <div class="bar-item">
            <span class="bar-label">×”× ×”×œ×” ×¢×œ×™×•× ×”</span>
            <div class="bar-track"><div class="bar-fill" style="width:25%">3</div></div>
          </div>
          <div class="bar-item">
            <span class="bar-label">×›×¡×¤×™×</span>
            <div class="bar-track"><div class="bar-fill" style="width:8%">1</div></div>
          </div>
          <div class="bar-item">
            <span class="bar-label">××©××‘×™ ×× ×•×©</span>
            <div class="bar-track"><div class="bar-fill" style="width:8%">1</div></div>
          </div>
          <div class="bar-item">
            <span class="bar-label">×¤×™×ª×•×— ×¢×¡×§×™</span>
            <div class="bar-track"><div class="bar-fill" style="width:8%">1</div></div>
          </div>
          <div class="bar-item">
            <span class="bar-label">×ª×¤×¢×•×œ</span>
            <div class="bar-track"><div class="bar-fill" style="width:16%">2</div></div>
          </div>
          <div class="bar-item">
            <span class="bar-label">×˜×›× ×•×œ×•×’×™×”</span>
            <div class="bar-track"><div class="bar-fill" style="width:8%">1</div></div>
          </div>
          <div class="bar-item">
            <span class="bar-label">×¨×’×•×œ×¦×™×”</span>
            <div class="bar-track"><div class="bar-fill" style="width:8%">1</div></div>
          </div>
          <div class="bar-item">
            <span class="bar-label">×©×™×¨×•×ª ×œ×§×•×—×•×ª</span>
            <div class="bar-track"><div class="bar-fill" style="width:8%">1</div></div>
          </div>
          <div class="bar-item">
            <span class="bar-label">×ª××•×¨×” ××œ××” (×‘×ª)</span>
            <div class="bar-track"><div class="bar-fill" style="width:16%">2</div></div>
          </div>
        </div>
      </div>

      <div class="glass-card">
        <div class="card-title">ğŸ“ˆ ×ª×•×‘× ×•×ª ××¤×ª×—</div>
        <div style="display:flex;flex-direction:column;gap:14px;">
          <div style="padding:16px;background:var(--glass-bg);border-radius:10px;border:1px solid var(--glass-border);">
            <div style="font-size:13px;color:var(--gold);font-weight:600;margin-bottom:6px;">ğŸ†• ×× ×›"×œ×™×ª ×—×“×©×”</div>
            <div style="font-size:12px;color:var(--text-secondary);line-height:1.6;">×§×¨×Ÿ ×©××™×¨ ××•× ×ª×” ×‘××¨×¥ 2024, ×œ××—×¨ 12+ ×©× ×™× ×›×× ×›"×œ×™×ª ×§×‘×•×¦×ª ×©×§×œ. ××‘×™××” × ×™×¡×™×•×Ÿ ×¢×©×™×¨ ×‘×ª×¢×©×™×™×ª ×”×‘×™×˜×•×—.</div>
          </div>
          <div style="padding:16px;background:var(--glass-bg);border-radius:10px;border:1px solid var(--glass-border);">
            <div style="font-size:13px;color:var(--gold);font-weight:600;margin-bottom:6px;">ğŸ—ï¸ ××‘× ×” ××•×¨×—×‘</div>
            <div style="font-size:12px;color:var(--text-secondary);line-height:1.6;">×”×§×‘×•×¦×” ×›×•×œ×œ×ª ×—×‘×¨×ª ×‘×ª - ×ª××•×¨×” ××œ××” - ×¢× ×”× ×”×œ×” ××©×•×ª×¤×ª ×©×œ ×©× ×™ ×× ×›"×œ×™×.</div>
          </div>
          <div style="padding:16px;background:var(--glass-bg);border-radius:10px;border:1px solid var(--glass-border);">
            <div style="font-size:13px;color:var(--gold);font-weight:600;margin-bottom:6px;">ğŸ’» ×“×’×© ×˜×›× ×•×œ×•×’×™</div>
            <div style="font-size:12px;color:var(--text-secondary);line-height:1.6;">CIO ×—×™×™× ×”×¨×©×§×•-×™×‘×•×¨ (7K ×¢×•×§×‘×™×) ××•×‘×™×œ ×˜×¨× ×¡×¤×•×¨××¦×™×” ×“×™×’×™×˜×œ×™×ª, ××‘×˜×—×ª ××™×“×¢ ×•×¡×™×™×‘×¨.</div>
          </div>
          <div style="padding:16px;background:var(--glass-bg);border-radius:10px;border:1px solid var(--glass-border);">
            <div style="font-size:13px;color:var(--gold);font-weight:600;margin-bottom:6px;">ğŸ¯ ×—×•×•×™×ª ×œ×§×•×—</div>
            <div style="font-size:12px;color:var(--text-secondary);line-height:1.6;">×ª×¤×§×™×“ ×™×™×¢×•×“×™ ×œ×—×•×•×™×ª ×œ×§×•×— (CX) ××¢×™×“ ×¢×œ ×“×’×© ××¡×˜×¨×˜×’×™ ×¢×œ ×©×‘×™×¢×•×ª ×¨×¦×•×Ÿ ×œ×§×•×—×•×ª.</div>
          </div>
        </div>
      </div>
    </div>

    <div class="glass-card" style="margin-top:20px;">
      <div class="card-title">ğŸ”— × ×•×›×—×•×ª LinkedIn</div>
      <div class="grid-4">
        <div style="padding:16px;background:var(--glass-bg);border-radius:10px;text-align:center;border:1px solid var(--glass-border);">
          <div style="font-size:28px;font-weight:700;color:var(--gold);">4</div>
          <div style="font-size:11px;color:var(--text-muted);">×¤×¨×•×¤×™×œ×™× ××–×•×”×™×</div>
        </div>
        <div style="padding:16px;background:var(--glass-bg);border-radius:10px;text-align:center;border:1px solid var(--glass-border);">
          <div style="font-size:28px;font-weight:700;color:var(--gold);">7K</div>
          <div style="font-size:11px;color:var(--text-muted);">×¢×•×§×‘×™× (CIO)</div>
        </div>
        <div style="padding:16px;background:var(--glass-bg);border-radius:10px;text-align:center;border:1px solid var(--glass-border);">
          <div style="font-size:28px;font-weight:700;color:var(--gold);">1,338</div>
          <div style="font-size:11px;color:var(--text-muted);">×¢×•×§×‘×™× (CEO)</div>
        </div>
        <div style="padding:16px;background:var(--glass-bg);border-radius:10px;text-align:center;border:1px solid var(--glass-border);">
          <div style="font-size:28px;font-weight:700;color:var(--gold);">511</div>
          <div style="font-size:11px;color:var(--text-muted);">×¢×•×§×‘×™ ×”×—×‘×¨×”</div>
        </div>
      </div>
    </div>
  </section>
</div>

<!-- Executive Detail Overlay -->
<div class="exec-detail-overlay" id="execOverlay" onclick="if(event.target===this)closeDetail()">
  <div class="exec-detail" id="execDetail"></div>
</div>

<script>
// ========== DATA ==========
const executives = [
  {
    id: 'keren',
    nameHe: '×§×¨×Ÿ ×©××™×¨',
    nameEn: 'Keren Shamir',
    titleHe: '×× ×›×´×œ×™×ª ×§×‘×•×¦×ª ×ª××•×¨×”',
    titleEn: 'CEO, Tmura Group',
    linkedin: 'https://www.linkedin.com/in/keren-shamir',
    reportsTo: null,
    level: 1,
    division: '×”× ×”×œ×”',
    initials: '×§',
    started: '××¨×¥ 2024',
    background: '×× ×›"×œ×™×ª ×§×‘×•×¦×ª ×©×§×œ (12+ ×©× ×™×, 2012-2024), ×× ×›"×œ×™×ª ×¡×•×›× ×•×ª ×©×§×œ (2010-2012), ×¡×× ×›"×œ×™×ª ×¡×•×›× ×•×ª ×©×§×œ (2004-2010)',
    education: 'MBA ×©×™×•×•×§ - ×”××›×œ×œ×” ×”××§×“××™×ª × ×ª× ×™×” (2003-2006), BSc ×¡×˜×˜×™×¡×˜×™×§×” - ××•× ×™×‘×¨×¡×™×˜×ª ×—×™×¤×” (1994-1998)',
    languages: '×¢×‘×¨×™×ª, ×× ×’×œ×™×ª, ×¦×¨×¤×ª×™×ª',
    skills: '×‘×™×˜×•×—, × ×™×”×•×œ ×¡×™×›×•× ×™×',
    followers: '1,338 ×¢×•×§×‘×™×, 500+ ×§×©×¨×™×',
    about: '××¢×œ ×©× ×™ ×¢×©×•×¨×™× ×©×œ × ×™×¡×™×•×Ÿ ×‘×ª×¢×©×™×™×ª ×”×‘×™×˜×•×— ×•×”×©×™×¨×•×ª×™× ×”×¤×™× × ×¡×™×™×'
  },
  {
    id: 'gilad',
    nameHe: '×’×œ×¢×“ ×—×¨××•×Ÿ',
    nameEn: 'Gilad Harmon',
    titleHe: '××©× ×” ×œ×× ×›"×œ',
    titleEn: 'Deputy CEO',
    linkedin: null,
    reportsTo: 'keren',
    level: 2,
    division: '×”× ×”×œ×”',
    initials: '×’'
  },
  {
    id: 'avshalom',
    nameHe: '××‘×©×œ×•× ×™×©×•×¨×•×Ÿ',
    nameEn: 'Avshalom Yeshurun',
    titleHe: '×¡×× ×›"×œ ×›×¡×¤×™×',
    titleEn: 'CFO',
    linkedin: null,
    reportsTo: 'keren',
    level: 2,
    division: '×›×¡×¤×™×',
    initials: '×'
  },
  {
    id: 'rinat',
    nameHe: '×¨×™× ×ª ×˜×™×§×•×¦×§×™',
    nameEn: 'Rinat Malachi Tikotzki',
    titleHe: '×¡×× ×›"×œ×™×ª ××©××‘×™ ×× ×•×© ×•×× ×”×œ×”',
    titleEn: 'VP HR & Administration',
    linkedin: 'https://www.linkedin.com/in/rinat-malachi-tikotzki-088107270',
    reportsTo: 'keren',
    level: 2,
    division: '××©××‘×™ ×× ×•×©',
    initials: '×¨'
  },
  {
    id: 'eitan',
    nameHe: '××™×ª×Ÿ ×—×¨×“×•×Ÿ',
    nameEn: 'Eitan Chardon',
    titleHe: '×¡×× ×›"×œ ××¢×¨×š ×¢×¡×§×™×',
    titleEn: 'VP Business Development',
    linkedin: null,
    reportsTo: 'gilad',
    level: 2,
    division: '×¤×™×ª×•×— ×¢×¡×§×™',
    initials: '×'
  },
  {
    id: 'iris',
    nameHe: '××™×¨×™×¡ ××× ××™',
    nameEn: 'Iris Maanai',
    titleHe: '×¡×× ×›"×œ×™×ª ×—×˜×™×‘×ª ×ª×¤×¢×•×œ',
    titleEn: 'VP Operations Division',
    linkedin: null,
    reportsTo: 'gilad',
    level: 2,
    division: '×ª×¤×¢×•×œ',
    initials: '×'
  },
  {
    id: 'naor',
    nameHe: '× ××•×¨ ×§×•×‘×™',
    nameEn: 'Naor Kobi',
    titleHe: '×¡×× ×›"×œ ×¨×’×•×œ×¦×™×”, ×”×“×¨×›×” ×•×©×™××•×¨',
    titleEn: 'VP Regulation, Training & Retention',
    linkedin: null,
    reportsTo: 'gilad',
    level: 2,
    division: '×¨×’×•×œ×¦×™×”',
    initials: '× '
  },
  {
    id: 'haim',
    nameHe: '×—×™×™× ×”×¨×©×§×• ×™×‘×•×¨',
    nameEn: 'Haim Hershko-Yavor',
    titleHe: '×¡×× ×›"×œ ××¢×¨×›×•×ª ××™×“×¢',
    titleEn: 'CIO / VP IT',
    linkedin: 'https://www.linkedin.com/in/haimhershkoyavor',
    reportsTo: 'keren',
    level: 2,
    division: '×˜×›× ×•×œ×•×’×™×”',
    initials: '×—',
    about: 'Strategic CIO | Expertise in PMO & Change Management | Champion of Information Security & Cyber Resilience | Driving Digital Transformation & Business Growth Through Technological Excellence',
    followers: '7K ×¢×•×§×‘×™×'
  },
  {
    id: 'liat',
    nameHe: '×œ×™××ª ×—×•×–×™××¡',
    nameEn: 'Liat Chozias',
    titleHe: '×¡×× ×›"×œ×™×ª ××¨×›×– ×”×©×™×¨×•×ª',
    titleEn: 'VP Service Center',
    linkedin: null,
    reportsTo: 'gilad',
    level: 2,
    division: '×©×™×¨×•×ª',
    initials: '×œ'
  },
  {
    id: 'merav',
    nameHe: '××™×¨×‘ ×‘×Ÿ ×¢××™ ×–×›×•×ª',
    nameEn: 'Merav Ben Ami Zchut',
    titleHe: '×× ×”×œ×ª ×ª×—×•× ×©×‘×™×¢×•×ª ×¨×¦×•×Ÿ ×•×—×•×•×™×ª ×œ×§×•×—',
    titleEn: 'Head of Customer Experience (CX)',
    linkedin: 'https://www.linkedin.com/in/merav-ben-ami-302b1615',
    reportsTo: 'iris',
    level: 3,
    division: '×ª×¤×¢×•×œ',
    initials: '×'
  },
  {
    id: 'roni',
    nameHe: '×¨×•× ×™ ×©×©×•×Ÿ',
    nameEn: 'Roni Sasson',
    titleHe: '×× ×›"×œ ××©×•×ª×£, ×ª××•×¨×” ××œ××”',
    titleEn: 'Co-CEO, Tmura Mlea',
    linkedin: null,
    reportsTo: 'keren',
    level: 3,
    division: '×ª××•×¨×” ××œ××”',
    initials: '×¨',
    subsidiary: true
  },
  {
    id: 'guri',
    nameHe: '×’×•×¨×™ ×™×¢×§×‘',
    nameEn: 'Guri Yaakov',
    titleHe: '×× ×›"×œ ××©×•×ª×£, ×ª××•×¨×” ××œ××”',
    titleEn: 'Co-CEO, Tmura Mlea',
    linkedin: null,
    reportsTo: 'keren',
    level: 3,
    division: '×ª××•×¨×” ××œ××”',
    initials: '×’',
    subsidiary: true
  }
];

// ========== NAVIGATION ==========
function showSection(name) {
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
  document.getElementById('section-' + name).classList.add('active');
  event.target.classList.add('active');
  
  if (name === 'orgchart') drawOrgChart();
  if (name === 'network') drawForceGraph();
  if (name === 'executives') renderExecGrid();
}

// ========== SEARCH ==========
function handleSearch(query) {
  if (!query.trim()) {
    showSection('overview');
    document.querySelector('.nav-tab').classList.add('active');
    return;
  }
  
  // Switch to executives and filter
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.getElementById('section-executives').classList.add('active');
  document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
  document.querySelectorAll('.nav-tab')[3].classList.add('active');
  
  renderExecGrid(query.trim().toLowerCase());
}

// ========== EXECUTIVE GRID ==========
function renderExecGrid(filter = '') {
  const grid = document.getElementById('execGrid');
  const filtered = executives.filter(e => {
    if (!filter) return true;
    return e.nameHe.includes(filter) || 
           e.nameEn.toLowerCase().includes(filter) || 
           e.titleHe.includes(filter) || 
           e.titleEn.toLowerCase().includes(filter) ||
           (e.division && e.division.includes(filter));
  });
  
  grid.innerHTML = filtered.map(e => `
    <div class="exec-card" onclick="showExecDetail('${e.id}')">
      <div class="avatar-sm">${e.initials}</div>
      <div class="info">
        <h3>${e.nameHe}</h3>
        <div class="en-name">${e.nameEn}</div>
        <div class="role">${e.titleHe}</div>
        ${e.subsidiary ? '<div class="subsidiary-badge">×—×‘×¨×ª ×‘×ª</div>' : ''}
      </div>
    </div>
  `).join('');
}

// ========== EXECUTIVE DETAIL ==========
function showExecDetail(id) {
  const e = executives.find(x => x.id === id);
  if (!e) return;
  
  const manager = e.reportsTo ? executives.find(x => x.id === e.reportsTo) : null;
  const reports = executives.filter(x => x.reportsTo === id);
  
  let html = `
    <button class="close-btn" onclick="closeDetail()">âœ•</button>
    <div class="exec-avatar">${e.initials}</div>
    <div class="exec-name-he">${e.nameHe}</div>
    <div class="exec-name-en">${e.nameEn}</div>
    <div class="exec-title">${e.titleHe} | ${e.titleEn}</div>
    ${e.subsidiary ? '<div class="subsidiary-badge" style="margin-bottom:12px;">×ª××•×¨×” ××œ××” - ×—×‘×¨×ª ×‘×ª</div>' : ''}
    <div class="exec-meta">
  `;
  
  if (e.started) html += `<div class="exec-meta-item"><span class="label">×‘×ª×¤×§×™×“ ×××–</span><span>${e.started}</span></div>`;
  if (e.division) html += `<div class="exec-meta-item"><span class="label">×—×˜×™×‘×”</span><span>${e.division}</span></div>`;
  if (manager) html += `<div class="exec-meta-item"><span class="label">××“×•×•×—/×ª ×œ</span><span>${manager.nameHe} (${manager.titleHe})</span></div>`;
  if (reports.length) html += `<div class="exec-meta-item"><span class="label">×›×¤×™×¤×™×</span><span>${reports.map(r => r.nameHe).join(', ')}</span></div>`;
  if (e.background) html += `<div class="exec-meta-item"><span class="label">×¨×§×¢</span><span>${e.background}</span></div>`;
  if (e.education) html += `<div class="exec-meta-item"><span class="label">×”×©×›×œ×”</span><span>${e.education}</span></div>`;
  if (e.languages) html += `<div class="exec-meta-item"><span class="label">×©×¤×•×ª</span><span>${e.languages}</span></div>`;
  if (e.skills) html += `<div class="exec-meta-item"><span class="label">××•××—×™×•×ª</span><span>${e.skills}</span></div>`;
  if (e.followers) html += `<div class="exec-meta-item"><span class="label">LinkedIn</span><span>${e.followers}</span></div>`;
  if (e.about) html += `<div class="exec-meta-item"><span class="label">××•×“×•×ª</span><span>${e.about}</span></div>`;
  
  html += '</div>';
  
  if (e.linkedin) {
    html += `<a class="linkedin-btn" href="${e.linkedin}" target="_blank">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
      ×¤×¨×•×¤×™×œ LinkedIn
    </a>`;
  }
  
  document.getElementById('execDetail').innerHTML = html;
  document.getElementById('execOverlay').classList.add('visible');
}

function closeDetail() {
  document.getElementById('execOverlay').classList.remove('visible');
}

document.addEventListener('keydown', e => { if (e.key === 'Escape') closeDetail(); });

// ========== ORG CHART ==========
function drawOrgChart() {
  const svg = d3.select('#org-chart');
  svg.selectAll('*').remove();
  
  const width = 1400;
  const height = 720;
  svg.attr('width', width).attr('height', height).attr('viewBox', `0 0 ${width} ${height}`);
  
  // Build hierarchy
  const treeData = {
    id: 'keren', nameHe: '×§×¨×Ÿ ×©××™×¨', titleHe: '×× ×›"×œ×™×ª', level: 1,
    children: [
      {
        id: 'gilad', nameHe: '×’×œ×¢×“ ×—×¨××•×Ÿ', titleHe: '××©× ×” ×œ×× ×›"×œ', level: 2,
        children: [
          { id: 'eitan', nameHe: '××™×ª×Ÿ ×—×¨×“×•×Ÿ', titleHe: '×¡×× ×›"×œ ×¢×¡×§×™×', level: 2 },
          { id: 'iris', nameHe: '××™×¨×™×¡ ××× ××™', titleHe: '×¡×× ×›"×œ×™×ª ×ª×¤×¢×•×œ', level: 2,
            children: [
              { id: 'merav', nameHe: '××™×¨×‘ ×‘×Ÿ ×¢××™ ×–×›×•×ª', titleHe: '×× ×”×œ×ª CX', level: 3 }
            ]
          },
          { id: 'naor', nameHe: '× ××•×¨ ×§×•×‘×™', titleHe: '×¡×× ×›"×œ ×¨×’×•×œ×¦×™×”', level: 2 },
          { id: 'liat', nameHe: '×œ×™××ª ×—×•×–×™××¡', titleHe: '×¡×× ×›"×œ×™×ª ×©×™×¨×•×ª', level: 2 }
        ]
      },
      { id: 'avshalom', nameHe: '××‘×©×œ×•× ×™×©×•×¨×•×Ÿ', titleHe: '×¡×× ×›"×œ ×›×¡×¤×™×', level: 2 },
      { id: 'rinat', nameHe: '×¨×™× ×ª ×˜×™×§×•×¦×§×™', titleHe: '×¡×× ×›"×œ×™×ª HR', level: 2 },
      { id: 'haim', nameHe: '×—×™×™× ×”×¨×©×§×• ×™×‘×•×¨', titleHe: '×¡×× ×›"×œ IT', level: 2 },
      {
        id: 'tmura-mlea', nameHe: '×ª××•×¨×” ××œ××”', titleHe: '×—×‘×¨×ª ×‘×ª', level: 2, isGroup: true,
        children: [
          { id: 'roni', nameHe: '×¨×•× ×™ ×©×©×•×Ÿ', titleHe: '×× ×›"×œ ××©×•×ª×£', level: 3, subsidiary: true },
          { id: 'guri', nameHe: '×’×•×¨×™ ×™×¢×§×‘', titleHe: '×× ×›"×œ ××©×•×ª×£', level: 3, subsidiary: true }
        ]
      }
    ]
  };
  
  const root = d3.hierarchy(treeData);
  const treeLayout = d3.tree().size([width - 200, height - 180]);
  treeLayout(root);
  
  const g = svg.append('g').attr('transform', 'translate(100, 60)');
  
  // Draw links
  g.selectAll('.link')
    .data(root.links())
    .enter()
    .append('path')
    .attr('class', 'org-link')
    .attr('d', d => {
      return `M${d.source.x},${d.source.y + 30}
              C${d.source.x},${(d.source.y + d.target.y) / 2 + 30}
               ${d.target.x},${(d.source.y + d.target.y) / 2 + 30}
               ${d.target.x},${d.target.y + 30}`;
    });
  
  // Draw nodes
  const nodes = g.selectAll('.node')
    .data(root.descendants())
    .enter()
    .append('g')
    .attr('class', 'org-node')
    .attr('transform', d => `translate(${d.x}, ${d.y + 30})`)
    .on('click', (event, d) => {
      if (!d.data.isGroup) showExecDetail(d.data.id);
    });
  
  // Node background
  nodes.append('rect')
    .attr('class', 'node-bg')
    .attr('x', -70)
    .attr('y', -22)
    .attr('width', 140)
    .attr('height', 50)
    .attr('rx', 10)
    .attr('fill', d => {
      if (d.data.level === 1) return 'rgba(212, 168, 67, 0.25)';
      if (d.data.isGroup) return 'rgba(212, 168, 67, 0.1)';
      if (d.data.subsidiary) return 'rgba(160, 125, 46, 0.15)';
      return 'rgba(255, 255, 255, 0.06)';
    })
    .attr('stroke', d => d.data.level === 1 ? 'rgba(212, 168, 67, 0.6)' : 'rgba(255, 255, 255, 0.1)')
    .attr('stroke-width', d => d.data.level === 1 ? 2 : 1);
  
  // Name text
  nodes.append('text')
    .attr('text-anchor', 'middle')
    .attr('y', -2)
    .attr('fill', d => d.data.level === 1 ? '#D4A843' : '#e8e8e8')
    .attr('font-size', d => d.data.level === 1 ? '13px' : '12px')
    .attr('font-weight', d => d.data.level === 1 ? '700' : '500')
    .text(d => d.data.nameHe);
  
  // Title text
  nodes.append('text')
    .attr('text-anchor', 'middle')
    .attr('y', 16)
    .attr('fill', '#9ca3af')
    .attr('font-size', '10px')
    .text(d => d.data.titleHe);
}

// ========== FORCE GRAPH ==========
function drawForceGraph() {
  const container = document.getElementById('force-graph');
  container.innerHTML = '';
  
  const width = container.clientWidth;
  const height = 600;
  
  const svg = d3.select('#force-graph')
    .append('svg')
    .attr('width', width)
    .attr('height', height);
  
  const nodes = executives.map(e => ({
    id: e.id,
    nameHe: e.nameHe,
    nameEn: e.nameEn,
    titleHe: e.titleHe,
    level: e.level,
    initials: e.initials,
    radius: e.level === 1 ? 35 : e.level === 2 ? 25 : 20
  }));
  
  const links = executives
    .filter(e => e.reportsTo)
    .map(e => ({
      source: e.reportsTo,
      target: e.id
    }));
  
  const simulation = d3.forceSimulation(nodes)
    .force('link', d3.forceLink(links).id(d => d.id).distance(120))
    .force('charge', d3.forceManyBody().strength(-400))
    .force('center', d3.forceCenter(width / 2, height / 2))
    .force('collision', d3.forceCollide().radius(d => d.radius + 15));
  
  // Glow filter
  const defs = svg.append('defs');
  const filter = defs.append('filter').attr('id', 'glow');
  filter.append('feGaussianBlur').attr('stdDeviation', '3').attr('result', 'coloredBlur');
  const merge = filter.append('feMerge');
  merge.append('feMergeNode').attr('in', 'coloredBlur');
  merge.append('feMergeNode').attr('in', 'SourceGraphic');
  
  const link = svg.append('g')
    .selectAll('line')
    .data(links)
    .enter()
    .append('line')
    .attr('stroke', 'rgba(212, 168, 67, 0.2)')
    .attr('stroke-width', 1.5);
  
  const node = svg.append('g')
    .selectAll('g')
    .data(nodes)
    .enter()
    .append('g')
    .style('cursor', 'pointer')
    .on('click', (event, d) => showExecDetail(d.id))
    .call(d3.drag()
      .on('start', (event, d) => {
        if (!event.active) simulation.alphaTarget(0.3).restart();
        d.fx = d.x; d.fy = d.y;
      })
      .on('drag', (event, d) => { d.fx = event.x; d.fy = event.y; })
      .on('end', (event, d) => {
        if (!event.active) simulation.alphaTarget(0);
        d.fx = null; d.fy = null;
      }));
  
  node.append('circle')
    .attr('r', d => d.radius)
    .attr('fill', d => {
      if (d.level === 1) return 'rgba(212, 168, 67, 0.3)';
      if (d.level === 2) return 'rgba(212, 168, 67, 0.15)';
      return 'rgba(212, 168, 67, 0.08)';
    })
    .attr('stroke', d => d.level === 1 ? '#D4A843' : 'rgba(212, 168, 67, 0.4)')
    .attr('stroke-width', d => d.level === 1 ? 2.5 : 1.5)
    .attr('filter', d => d.level === 1 ? 'url(#glow)' : null);
  
  node.append('text')
    .attr('text-anchor', 'middle')
    .attr('dy', '0.35em')
    .attr('fill', d => d.level === 1 ? '#D4A843' : '#e8e8e8')
    .attr('font-size', d => d.level === 1 ? '16px' : '12px')
    .attr('font-weight', '600')
    .attr('font-family', 'Heebo')
    .text(d => d.initials);
  
  node.append('text')
    .attr('text-anchor', 'middle')
    .attr('dy', d => d.radius + 14)
    .attr('fill', '#9ca3af')
    .attr('font-size', '10px')
    .attr('font-family', 'Heebo')
    .text(d => d.nameHe);
  
  simulation.on('tick', () => {
    link
      .attr('x1', d => d.source.x)
      .attr('y1', d => d.source.y)
      .attr('x2', d => d.target.x)
      .attr('y2', d => d.target.y);
    
    node.attr('transform', d => `translate(${d.x}, ${d.y})`);
  });
}

// ========== INIT ==========
renderExecGrid();
</script>

</body>
</html>
<!-- deploy Mon Feb  2 22:01:55 IST 2026 -->
<!-- v2 Mon Feb  2 22:07:27 IST 2026 -->
<!-- rebuild Mon Feb  2 22:13:56 IST 2026 -->
